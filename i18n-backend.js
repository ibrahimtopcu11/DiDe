// i18n-backend.js
const translations = {
  tr: {
    unauthenticated: 'Oturum açmanız gerekiyor',
    invalid_token: 'Geçersiz oturum',
    user_inactive: 'Kullanıcı hesabı aktif değil',
    forbidden: 'Bu işlem için yetkiniz yok',
    eksik_bilgi: 'Eksik bilgi',
    gecersiz_koordinat: 'Koordinatlar eksik ya da hatalı',
    gecersiz_olay_turu: 'Geçersiz/kapalı olay türü',
    gecersiz_id: 'Geçersiz ID',
    bulunamadi: 'Kayıt bulunamadı',
    veritabani_hatasi: 'Veritabanı hatası',
    gecersiz_istek: 'Geçersiz istek',
    isim_mevcut: 'Bu isimde bir olay türü zaten mevcut',
    alan_yok: 'Güncellenecek alan yok',
    yetkisiz: 'Bu işlem için yetkiniz yok',
    zaten_aktif: 'Kullanıcı zaten aktif',
    bulunamadi_veya_pasif: 'Kayıt bulunamadı veya zaten pasif',
    bulunamadi_veya_zaten_aktif: 'Kullanıcı bulunamadı veya zaten aktif',
    hesap_bulunamadi: 'Hesabınız bulunamadı',
    sifre_hatali: 'Şifreyi yanlış girdiniz',
    email_dogrulanmamış: 'E-posta doğrulanmamış',
    totp_gerekli: 'Doğrulama kodu gerekli',
    totp_gecersiz: 'Doğrulama kodu geçersiz',
    kullanici_pasif: 'Kullanıcı pasif durumdadır',
    kayitli_hesap_yok: 'Lütfen kayıtlı bir hesabın mail adresini giriniz',
    kod_suresi_doldu: 'Kodun süresi dolmuş',
    kod_gecersiz: 'Doğrulama kodu hatalı',
    sifre_eslesmiyor: 'Yeni şifreler eşleşmiyor',
    kullanici_veya_eposta_kayitli: 'Kullanıcı adı veya e-posta zaten kayıtlı',
    gecersiz_eposta: 'Geçerli formatta bir e-posta adresi giriniz',
    eposta_gonderilemedi: 'E-posta gönderilemedi',
    gecersiz_rol: 'Geçersiz rol',
    base32_cakisma: 'BASE32 CODE aynı',
    bos_liste: 'İndirilecek olay yok',
    gecersiz_idler: 'Geçerli olay ID\'si bulunamadı',
    olay_yok: 'Filtreye uygun olay bulunamadı',
    sunucu_hatasi: 'Sunucu hatası',
    yukleme_hatasi: 'Yükleme hatası',
    o_adi_gerekli: 'Olay türü adı zorunludur',
    duplicate_olay_turu: 'Aynı ad ile olay türü ekleyemezsiniz',
    zayif_sifre: 'Zayıf şifre: En az 8 karakter, bir büyük, bir küçük harf ve bir sembol içermeli',
    gecersiz: 'Geçersiz işlem'
  },
  en: {
    unauthenticated: 'Authentication required',
    invalid_token: 'Invalid session',
    user_inactive: 'User account is inactive',
    forbidden: 'You do not have permission',
    eksik_bilgi: 'Missing information',
    gecersiz_koordinat: 'Coordinates are missing or invalid',
    gecersiz_olay_turu: 'Invalid/inactive event type',
    gecersiz_id: 'Invalid ID',
    bulunamadi: 'Record not found',
    veritabani_hatasi: 'Database error',
    gecersiz_istek: 'Invalid request',
    isim_mevcut: 'Event type name already exists',
    alan_yok: 'No fields to update',
    yetkisiz: 'You do not have permission',
    zaten_aktif: 'User is already active',
    bulunamadi_veya_pasif: 'Record not found or already inactive',
    bulunamadi_veya_zaten_aktif: 'User not found or already active',
    hesap_bulunamadi: 'Your account was not found',
    sifre_hatali: 'Incorrect password',
    email_dogrulanmamış: 'Email not verified',
    totp_gerekli: 'Verification code required',
    totp_gecersiz: 'Invalid verification code',
    kullanici_pasif: 'User is inactive',
    kayitli_hesap_yok: 'Please enter a registered email',
    kod_suresi_doldu: 'Code has expired',
    kod_gecersiz: 'Invalid verification code',
    sifre_eslesmiyor: 'Passwords do not match',
    kullanici_veya_eposta_kayitli: 'Username or email already registered',
    gecersiz_eposta: 'Please enter a valid email',
    eposta_gonderilemedi: 'Email could not be sent',
    gecersiz_rol: 'Invalid role',
    base32_cakisma: 'BASE32 CODE conflict',
    bos_liste: 'No events to download',
    gecersiz_idler: 'No valid event IDs',
    olay_yok: 'No matching events',
    sunucu_hatasi: 'Server error',
    yukleme_hatasi: 'Upload error',
    o_adi_gerekli: 'Event type name is required',
    duplicate_olay_turu: 'Cannot add duplicate event type',
    zayif_sifre: 'Weak password: Must contain at least 8 characters, one uppercase, one lowercase letter and one special character',
    gecersiz: 'Invalid operation'
  }
};

function getErrorMessage(req, errorKey) {
  const acceptLang = req.headers['accept-language'] || '';
  const lang = acceptLang.toLowerCase().startsWith('en') ? 'en' : 'tr';
  return translations[lang]?.[errorKey] || translations.tr[errorKey] || errorKey;
}

module.exports = { getErrorMessage };